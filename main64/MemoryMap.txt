================================================================================
MEMORY MAP OVERVIEW
================================================================================

Physical Memory (First 16MB):
     0x000000  +------------------------+
               |   Real Mode IVT/BDA    |
     0x001000  +------------------------+
               | BIOS Information Block |
     0x001200  +------------------------+
               |    BIOS Memory Map     |
     0x001300  +------------------------+
               |          Free          |
     0x003000  +------------------------+
               |     KLDR64.BIN         |  64-bit Loader
               +------------------------+
               |        ...             |
     0x009000  +------------------------+
               |        PML4            |  Page Map Level 4 (4KB)
               |  Entry[0]   -> 0xA000  |    Identity Mapping
               |  Entry[256] -> 0xC000  |    Higher Half Mapping
     0x00A000  +------------------------+
               |        PDPT            |  Page Dir Pointer Table (4KB) - IDENTITY
               |  Entry[0]   -> 0xB000  |
     0x00B000  +------------------------+
               |         PD             |  Page Directory (4KB) - IDENTITY
               |  Entry[0-7] -> PTs     |    Points to PT0-PT7 @ 0xE000-0x15FFF
     0x00C000  +------------------------+
               |        PDPT            |  Page Dir Pointer Table (4KB) - HIGHER HALF
               |  Entry[0]   -> 0xD000  |
     0x00D000  +------------------------+
               |         PD             |  Page Directory (4KB) - HIGHER HALF
               |  Entry[0-7] -> PTs     |    Points to SAME PT0-PT7 @ 0xE000-0x15FFF
               |                        |    Maps virt 0xFFFF800000000000+ to phys 0x0+
     0x00E000  +------------------------+
               |        PT0             |  Page Table 0 (4KB) - maps 0x000000-0x1FFFFF
     0x00F000  +------------------------+
               |        PT1             |  Page Table 1 (4KB) - maps 0x200000-0x3FFFFF
     0x010000  +------------------------+
               |        PT2             |  Page Table 2 (4KB) - maps 0x400000-0x5FFFFF
     0x011000  +------------------------+
               |        PT3             |  Page Table 3 (4KB) - maps 0x600000-0x7FFFFF
     0x012000  +------------------------+
               |        PT4             |  Page Table 4 (4KB) - maps 0x800000-0x9FFFFF
     0x013000  +------------------------+
               |        PT5             |  Page Table 5 (4KB) - maps 0xA00000-0xBFFFFF
     0x014000  +------------------------+
               |        PT6             |  Page Table 6 (4KB) - maps 0xC00000-0xDFFFFF
     0x015000  +------------------------+
               |        PT7             |  Page Table 7 (4KB) - maps 0xE00000-0xFFFFFF
     0x016000  +------------------------+
               |        ...             |
     0x100000  +------------------------+  <-- 1MB Mark
               |     KERNEL.BIN         |  Rust Kernel loaded here
               |        |               |
               |        v               |  Kernel code + data + BSS
               |       ...              |
               +- - - - - - - - - - - - +  <-- __bss_end (page-aligned)
               |   PMM Layout Header    |  PmmLayoutHeader struct (8 bytes)
               |   PMM Region Array     |  PmmRegion[] (40 bytes each)
               |   PMM Bitmaps          |  Allocation bitmaps (variable size)
               +- - - - - - - - - - - - +
               |                        |
               |  Reserved for Stack    |  All pages marked USED in PMM
               |        ^               |  Stack grows downward
               |      Stack             |
     0x400000  +------------------------+  <-- 4MB Mark / Stack Top (RSP)
               |        ...             |
               |   Free Memory          |  First allocatable pages
               |        ...             |
     0x1000000 +------------------------+  <-- 16MB (End of mapped region)

Page Table Summary (4KB Pages):
   - Identity Mapping:    PML4[0]   -> PDPT @ 0xA000 -> PD @ 0xB000 -> PT0-PT7 @ 0xE000-0x15FFF
   - Higher Half Mapping: PML4[256] -> PDPT @ 0xC000 -> PD @ 0xD000 -> PT0-PT7 @ 0xE000-0x15FFF (shared)
   - Both mappings share the same 8 Page Tables (saves 32KB)
   - Total page table memory: 52KB (13 pages: 0x9000 - 0x15FFF)